{% extends 'game/base.html.twig' %}

{% block title %}En attente{% endblock %}

{% block body %}

    <header data-controller="game-sync"
            data-game-sync-url-value="{{ path('game_status') }}"
            data-game-sync-mercure-url-value="{{ mercure_public_url }}"
            data-game-sync-topic-value="{{ escape_id ? '/escape/' ~ escape_id ~ '/status' : '' }}"
            data-game-sync-redirect-url-value="{{ path('game_step', { step: current_step }) }}"
            data-game-sync-countdown-seconds-value="3">
        <div class="titre_header">
            <h1>En attente du départ</h1>
           {#  <p class="hint">Équipe {{ team_code }}</p> #}
        </div>
        <span class="badge">{{ team_code }}</span>
    </header>

    <div class="card stack">
        {% if game_status == 'waiting' %}
            <div class="status">La partie est ouverte. Préparez-vous !</div>
            <p class="hint">Quand le signal est donné, vous serez redirigé automatiquement.</p>
        {% elseif game_status == 'offline' %}
            <div class="status closed">La partie est temporairement fermée.</div>
            <p class="hint">Patientez jusqu'à la relance par l'animateur.</p>
        {% elseif game_status == 'finished' %}
            <div class="status closed">La partie est terminée.</div>
            <p class="hint">L'équipe {{ winner_name ?? 'gagnante' }} a trouvé le secret.</p>
        {% else %}
            <div class="status">La partie démarre...</div>
        {% endif %}
      {#   <a class="btn btn-outline" href="{{ path('game_step', { step: current_step }) }}">Accéder à l'étape {{ current_step }}</a> #}
    </div>
{#
    <div class="card">
        <h2>Conseil</h2>
        <p class="hint">Gardez ce téléphone avec vous : il affiche votre progression tout au long du jeu.</p>
    </div>
#}
{% endblock %}