{% extends 'game/base.html.twig' %}

{% block title %}Étape {{ step }}{% endblock %}

{% block body %}
    <header>
        <div>
            <h1>Étape {{ step }}</h1>
            <p class="hint">Équipe {{ team_code }} • Étape en cours : {{ current_step }}</p>
        </div>
        <span class="badge">{{ step }}</span>
    </header>

    <div class="card stack">
        <div class="status">Suivez les instructions de l'animateur pour cette étape.</div>
        <p class="hint">Lorsque vous avez trouvé la lettre, validez pour passer à l'étape suivante.</p>

        {% if error %}
            <div class="status closed">{{ error }}</div>
        {% endif %}

        <form method="post">
            <label>
                <span class="hint">Lettre attendue</span>
                <input class="input" type="text" name="letter" maxlength="1" required>
            </label>
            <button class="btn" type="submit">Valider l'étape {{ step }}</button>
        </form>
    </div>

    <div class="card">
        <h2>Progression</h2>
        <div class="progress">
            {% for label, data in progress %}
                <span class="{% if data.completed %}completed{% endif %}">
                {{ label }}{% if data.completed %} ✓{% endif %}
            </span>
            {% endfor %}
        </div>
    </div>

{% endblock %}